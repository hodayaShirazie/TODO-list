{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import'./ListTodo.css';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BASE_URL=process.env.REACT_APP_API_BASE_URL;const ListTodo=()=>{const[todos,setTodos]=useState([]);const navigate=useNavigate();useEffect(()=>{fetch(`${BASE_URL}/todo`).then(res=>res.json()).then(data=>{console.log('Fetched todos:',data);setTodos(data);}).catch(err=>console.error('Fetch error:',err));},[]);const handleEdit=todo_id=>{console.log('Edit clicked for ID:',todo_id);// Navigate to the EditTodo component, passing the todo_id in the URL\nnavigate(`/todo/${todo_id}`);};const handleDelete=todo_id=>{console.log('Delete clicked for ID:',todo_id);// Send DELETE request to server\naxios.delete(`${BASE_URL}/todo/${todo_id}`).then(()=>{// Filter out the deleted todo from the state\nsetTodos(prevTodos=>prevTodos.filter(todo=>todo.todo_id!==todo_id));console.log('Todo deleted successfully');}).catch(err=>{console.error('Failed to delete todo:',err);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"todo-container\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"todo-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"todo-header-row\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"todo-cell\",children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{className:\"todo-cell\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"th\",{className:\"todo-cell\",children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:todos.map(todo=>/*#__PURE__*/_jsxs(\"tr\",{children:[\" \",/*#__PURE__*/_jsx(\"td\",{className:\"todo-cell\",children:todo.description}),/*#__PURE__*/_jsx(\"td\",{className:\"todo-cell\",children:/*#__PURE__*/_jsx(\"button\",{className:\"todo-button\",onClick:()=>handleEdit(todo.todo_id),children:\"Edit\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"todo-cell\",children:/*#__PURE__*/_jsx(\"button\",{className:\"todo-button\",onClick:()=>handleDelete(todo.todo_id),children:\"Delete\"})})]},todo.todo_id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"todo-bottom-space\"})]});};export default ListTodo;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","BASE_URL","process","env","REACT_APP_API_BASE_URL","ListTodo","todos","setTodos","navigate","fetch","then","res","json","data","console","log","catch","err","error","handleEdit","todo_id","handleDelete","delete","prevTodos","filter","todo","className","children","map","description","onClick"],"sources":["C:/Users/Student/PERN-TODO/client/src/components/ListTodo.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './ListTodo.css';\r\nimport axios from 'axios';\r\n\r\nconst BASE_URL = process.env.REACT_APP_API_BASE_URL;\r\n\r\nconst ListTodo = () => {\r\n  const [todos, setTodos] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetch(`${BASE_URL}/todo`)\r\n    .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log('Fetched todos:', data);\r\n        setTodos(data);\r\n      })\r\n      .catch((err) => console.error('Fetch error:', err));\r\n  }, []);\r\n\r\n  const handleEdit = (todo_id) => {\r\n    console.log('Edit clicked for ID:', todo_id);\r\n    // Navigate to the EditTodo component, passing the todo_id in the URL\r\n    navigate(`/todo/${todo_id}`);\r\n  };\r\n\r\n\r\n  const handleDelete = (todo_id) => {\r\n    console.log('Delete clicked for ID:', todo_id);\r\n\r\n    // Send DELETE request to server\r\n    axios\r\n        .delete(`${BASE_URL}/todo/${todo_id}`)\r\n        .then(() => {\r\n            // Filter out the deleted todo from the state\r\n            setTodos((prevTodos) => prevTodos.filter((todo) => todo.todo_id !== todo_id));\r\n            console.log('Todo deleted successfully');\r\n        })\r\n        .catch((err) => {\r\n            console.error('Failed to delete todo:', err);\r\n        });\r\n  };\r\n\r\n  return (\r\n    <div className=\"todo-container\">\r\n      <table className=\"todo-table\">\r\n        <thead>\r\n          <tr className=\"todo-header-row\">\r\n            <th className=\"todo-cell\">Description</th>\r\n            <th className=\"todo-cell\">Edit</th>\r\n            <th className=\"todo-cell\">Delete</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {todos.map((todo) => (\r\n            <tr key={todo.todo_id}> {/* Use todo.todo_id instead of todo.id */}\r\n              <td className=\"todo-cell\">{todo.description}</td>\r\n              <td className=\"todo-cell\">\r\n                <button className=\"todo-button\" onClick={() => handleEdit(todo.todo_id)}>\r\n                  Edit\r\n                </button>\r\n              </td>\r\n              <td className=\"todo-cell\">\r\n                <button className=\"todo-button\" onClick={() => handleDelete(todo.todo_id)}>\r\n                  Delete\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n      <div className=\"todo-bottom-space\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ListTodo;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,gBAAgB,CACvB,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,QAAQ,CAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB,CAEnD,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAAc,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAE9BF,SAAS,CAAC,IAAM,CACdgB,KAAK,CAAC,GAAGR,QAAQ,OAAO,CAAC,CACxBS,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAAEG,IAAI,EAAK,CACdC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEF,IAAI,CAAC,CACnCN,QAAQ,CAACM,IAAI,CAAC,CAChB,CAAC,CAAC,CACDG,KAAK,CAAEC,GAAG,EAAKH,OAAO,CAACI,KAAK,CAAC,cAAc,CAAED,GAAG,CAAC,CAAC,CACvD,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAE,UAAU,CAAIC,OAAO,EAAK,CAC9BN,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAEK,OAAO,CAAC,CAC5C;AACAZ,QAAQ,CAAC,SAASY,OAAO,EAAE,CAAC,CAC9B,CAAC,CAGD,KAAM,CAAAC,YAAY,CAAID,OAAO,EAAK,CAChCN,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAEK,OAAO,CAAC,CAE9C;AACAxB,KAAK,CACA0B,MAAM,CAAC,GAAGrB,QAAQ,SAASmB,OAAO,EAAE,CAAC,CACrCV,IAAI,CAAC,IAAM,CACR;AACAH,QAAQ,CAAEgB,SAAS,EAAKA,SAAS,CAACC,MAAM,CAAEC,IAAI,EAAKA,IAAI,CAACL,OAAO,GAAKA,OAAO,CAAC,CAAC,CAC7EN,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC,CAC5C,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,EAAK,CACZH,OAAO,CAACI,KAAK,CAAC,wBAAwB,CAAED,GAAG,CAAC,CAChD,CAAC,CAAC,CACR,CAAC,CAED,mBACEjB,KAAA,QAAK0B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B3B,KAAA,UAAO0B,SAAS,CAAC,YAAY,CAAAC,QAAA,eAC3B7B,IAAA,UAAA6B,QAAA,cACE3B,KAAA,OAAI0B,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC7B7B,IAAA,OAAI4B,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,aAAW,CAAI,CAAC,cAC1C7B,IAAA,OAAI4B,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,MAAI,CAAI,CAAC,cACnC7B,IAAA,OAAI4B,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,QAAM,CAAI,CAAC,EACnC,CAAC,CACA,CAAC,cACR7B,IAAA,UAAA6B,QAAA,CACGrB,KAAK,CAACsB,GAAG,CAAEH,IAAI,eACdzB,KAAA,OAAA2B,QAAA,EAAuB,GAAC,cACtB7B,IAAA,OAAI4B,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAEF,IAAI,CAACI,WAAW,CAAK,CAAC,cACjD/B,IAAA,OAAI4B,SAAS,CAAC,WAAW,CAAAC,QAAA,cACvB7B,IAAA,WAAQ4B,SAAS,CAAC,aAAa,CAACI,OAAO,CAAEA,CAAA,GAAMX,UAAU,CAACM,IAAI,CAACL,OAAO,CAAE,CAAAO,QAAA,CAAC,MAEzE,CAAQ,CAAC,CACP,CAAC,cACL7B,IAAA,OAAI4B,SAAS,CAAC,WAAW,CAAAC,QAAA,cACvB7B,IAAA,WAAQ4B,SAAS,CAAC,aAAa,CAACI,OAAO,CAAEA,CAAA,GAAMT,YAAY,CAACI,IAAI,CAACL,OAAO,CAAE,CAAAO,QAAA,CAAC,QAE3E,CAAQ,CAAC,CACP,CAAC,GAXEF,IAAI,CAACL,OAYV,CACL,CAAC,CACG,CAAC,EACH,CAAC,cAERtB,IAAA,QAAK4B,SAAS,CAAC,mBAAmB,CAAM,CAAC,EACtC,CAAC,CAEV,CAAC,CAED,cAAe,CAAArB,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}